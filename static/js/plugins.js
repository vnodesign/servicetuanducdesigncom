!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a="undefined"==typeof globalThis?a||self:globalThis).reframe=b()}(this,function(){"use strict";function a(){for(var a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(var g=Array(a),h=0,b=0;b<c;b++)for(var i=arguments[b],j=0,k=i.length;j<k;j++,h++)g[h]=i[j];return g}return function(b,c){return void 0===c&&(c="js-reframe"),("string"==typeof b?a(document.querySelectorAll(b)):"length"in b?a(b):[b]).forEach(function(a){var b,e,g,h,j,k,m,p;-1!==a.className.split(" ").indexOf(c)||-1<a.style.width.indexOf("%")||(g=a.getAttribute("height")||a.offsetHeight,h=a.getAttribute("width")||a.offsetWidth,j=100*(("string"==typeof g?parseInt(g):g)/("string"==typeof h?parseInt(h):h)),(k=document.createElement("div")).className=c,(m=k.style).position="relative",m.width="100%",m.paddingTop=j+"%",(p=a.style).position="absolute",p.width="100%",p.height="100%",p.left="0",p.top="0",null!==(b=a.parentNode)&&void 0!==b&&b.insertBefore(k,a),null!==(e=a.parentNode)&&void 0!==e&&e.removeChild(a),k.appendChild(a))})}}),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self).handorgel=b()}(this,function(){"use strict";function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function j(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function k(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return void 0===a[b]||c&&c.writable}function l(a){for(var b,c=arguments,d=1;d<c.length;++d)if(b=c[d])for(var f in b)k(a,f)&&(a[f]=b[f]);return a}var e,h="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window,i=(function(a){var b,c;b="undefined"==typeof window?h:window,c=function(){function a(){}var b=a.prototype;return b.on=function(a,b){if(a&&b){var c=this._events=this._events||{},d=c[a]=c[a]||[];return-1==d.indexOf(b)&&d.push(b),this}},b.once=function(a,b){if(a&&b){this.on(a,b);var c=this._onceEvents=this._onceEvents||{};return(c[a]=c[a]||{})[b]=!0,this}},b.off=function(a,b){var c=this._events&&this._events[a];if(c&&c.length){var d=c.indexOf(b);return-1!=d&&c.splice(d,1),this}},b.emitEvent=function(a,b){var c=this._events&&this._events[a];if(c&&c.length){c=c.slice(0),b=b||[];for(var d,f=this._onceEvents&&this._onceEvents[a],g=0;g<c.length;g++)d=c[g],f&&f[d]&&(this.off(a,d),delete f[d]),d.apply(this,b);return this}},b.allOff=function(){delete this._events,delete this._onceEvents},a},a.exports?a.exports=c():b.EvEmitter=c()}(e={exports:{}},e.exports),e.exports),m=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,a={},q={button:{"aria-controls":function(){return this.id+"-content"},"aria-expanded":function(){return this.expanded?"true":"false"},"aria-disabled":function(){return this.disabled?"true":"false"}},content:{role:function(){return"region"},"aria-labelledby":function(){return this.id+"-header"}}},d=33,f=34,n=function(){function c(d,e,f){b(this,c),e.handorgelFold||(this.handorgel=d,this.header=e,this.button=e.firstElementChild,this.content=f,this.header.handorgelFold=this,this.content.handorgelFold=this,a[this.handorgel.id]||(a[this.handorgel.id]=0),this.id="".concat(this.handorgel.id,"-fold").concat(++a[this.handorgel.id]),this.header.setAttribute("id",this.id+"-header"),this.content.setAttribute("id",this.id+"-content"),this.focused=!1,this.expanded=!1,this.disabled=!1,this._listeners={},this._bindEvents(),this._initAria(),this._initialOpen(),this._initialFocus())}return j(c,[{key:"open",value:function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(!this.expanded)if(this.handorgel.emitEvent("fold:open",[this]),this.expanded=!0,this.handorgel.options.collapsible||this.disable(),this._updateAria("button","aria-expanded"),this.header.classList.add(this.handorgel.options.headerOpenClass),this.content.classList.add(this.handorgel.options.contentOpenClass),a){var b=this.content.firstElementChild.offsetHeight;this.content.style.height="".concat(b,"px")}else this._opened()}},{key:"close",value:function(){var a=this,b=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(this.expanded)if(this.handorgel.emitEvent("fold:close",[this]),this.expanded=!1,this.handorgel.options.collapsible||this.enable(),this._updateAria("button","aria-expanded"),this.header.classList.remove(this.handorgel.options.headerOpenedClass),this.content.classList.remove(this.handorgel.options.contentOpenedClass),b){var c=this.content.firstElementChild.offsetHeight;this.content.style.height="".concat(c,"px"),m(function(){a.content.style.height="0px"})}else this._closed()}},{key:"disable",value:function(){this.disabled=!0,this._updateAria("button","aria-disabled"),this.header.classList.add(this.handorgel.options.headerDisabledClass),this.content.classList.add(this.handorgel.options.contentDisabledClass)}},{key:"enable",value:function(){this.disabled=!1,this._updateAria("button","aria-disabled"),this.header.classList.remove(this.handorgel.options.headerDisabledClass),this.content.classList.remove(this.handorgel.options.contentDisabledClass)}},{key:"focus",value:function(){this.button.focus()}},{key:"blur",value:function(){this.button.blur()}},{key:"toggle",value:function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.expanded?this.close(a):this.open(a)}},{key:"destroy",value:function(){this._unbindEvents(),this._cleanAria(),this.header.classList.remove(this.handorgel.options.headerOpenClass),this.header.classList.remove(this.handorgel.options.headerOpenedClass),this.header.classList.remove(this.handorgel.options.headerFocusClass),this.content.classList.remove(this.handorgel.options.contentOpenClass),this.content.classList.remove(this.handorgel.options.contentOpenedClass),this.content.classList.remove(this.handorgel.options.contentFocusClass),this.content.style.height="0px",this.header.handorgelFold=null,this.content.handorgelFold=null,this.header.removeAttribute("id"),this.content.removeAttribute("id"),this.handorgel=null}},{key:"_opened",value:function(){this.content.style.height="auto",this.header.classList.add(this.handorgel.options.headerOpenedClass),this.content.classList.add(this.handorgel.options.contentOpenedClass),this.handorgel.emitEvent("fold:opened",[this])}},{key:"_closed",value:function(){this.header.classList.remove(this.handorgel.options.headerOpenClass),this.content.classList.remove(this.handorgel.options.contentOpenClass),this.handorgel.emitEvent("fold:closed",[this])}},{key:"_initialOpen",value:function(){var a=this;null===this.header.getAttribute(this.handorgel.options.initialOpenAttribute)&&null===this.content.getAttribute(this.handorgel.options.initialOpenAttribute)||(this.handorgel.options.initialOpenTransition?window.setTimeout(function(){a.open()},this.handorgel.options.initialOpenTransitionDelay):this.open(!1))}},{key:"_initialFocus",value:function(){null!==this.button.getAttribute("autofocus")&&this._handleFocus()}},{key:"_initAria",value:function(){this._updateAria("button"),this._updateAria("content")}},{key:"_cleanAria",value:function(){this._updateAria("button",null,!0),this._updateAria("content",null,!0)}},{key:"_updateAria",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(this.handorgel.options.ariaEnabled)if(b){var d=q[a][b].call(this);this[a].setAttribute(b,d)}else for(var e in q[a])if(q[a].hasOwnProperty(e))if(c)this[a].removeAttribute(e);else{var f=q[a][e].call(this);this[a].setAttribute(e,f)}}},{key:"_handleContentTransitionEnd",value:function(a){a.target===a.currentTarget&&"height"===a.propertyName&&(this.expanded?this._opened():this._closed())}},{key:"_handleFocus",value:function(){this.focused=!0,this.header.classList.add(this.handorgel.options.headerFocusClass),this.content.classList.add(this.handorgel.options.contentFocusClass),this.handorgel.emitEvent("fold:focus",[this])}},{key:"_handleBlur",value:function(){this.focused=!1,this.header.classList.remove(this.handorgel.options.headerFocusClass),this.content.classList.remove(this.handorgel.options.contentFocusClass),this.handorgel.emitEvent("fold:blur",[this])}},{key:"_handleButtonClick",value:function(){this.focus(),this.disabled||this.toggle()}},{key:"_handleButtonKeydown",value:function(a){if(this.handorgel.options.keyboardInteraction){var b=null;switch(a.which){case 40:b="next";break;case 38:b="prev";break;case 36:b="first";break;case 35:b="last";break;case f:a.ctrlKey&&(b="next");break;case d:a.ctrlKey&&(b="prev");}b&&(a.preventDefault(),this.handorgel.focus(b))}}},{key:"_handleContentKeydown",value:function(a){if(this.handorgel.options.keyboardInteraction&&a.ctrlKey){var b=null;switch(a.which){case f:b="next";break;case d:b="prev";}b&&(a.preventDefault(),this.handorgel.focus(b))}}},{key:"_bindEvents",value:function(){for(var a in this._listeners={bFocus:["focus",this.button,this._handleFocus.bind(this)],bBlur:["blur",this.button,this._handleBlur.bind(this)],bClick:["click",this.button,this._handleButtonClick.bind(this)],bKeydown:["keydown",this.button,this._handleButtonKeydown.bind(this)],cKeydown:["keydown",this.content,this._handleContentKeydown.bind(this)],cTransition:["transitionend",this.content,this._handleContentTransitionEnd.bind(this)]},this._listeners)if(this._listeners.hasOwnProperty(a)){var b=this._listeners[a];b[1].addEventListener(b[0],b[2])}}},{key:"_unbindEvents",value:function(){for(var a in this._listeners)if(this._listeners.hasOwnProperty(a)){var b=this._listeners[a];b[1].removeEventListener(b[0],b[2])}}}]),c}(),g=0,o=function(){function a(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b(this,a),c.handorgel||(this.element=c,this.element.handorgel=this,this.id="handorgel".concat(++g),this.element.setAttribute("id",this.id),this.folds=[],this.options=l({},a.defaultOptions,d),this._listeners={},this._bindEvents(),this._initAria(),this.update())}return j(a,[{key:"update",value:function(){this.folds=[];for(var a=this.element.children,b=0,c=a.length;b<c;b+=2){var d=a[b],f=a[b+1],g=d.handorgelFold;!g&&d&&f&&(g=new n(this,d,f)),g&&this.folds.push(g)}}},{key:"focus",value:function(a){for(var b=this.folds.length,c=null,d=0;d<b&&null===c;d++)this.folds[d].focused&&(c=d);if("prev"!==a&&"next"!==a||null!==c||(a="prev"===a?"last":"first"),"prev"===a&&0===c){if(!this.options.carouselFocus)return;a="last"}if("next"===a&&c===b-1){if(!this.options.carouselFocus)return;a="first"}switch(a){case"prev":this.folds[--c].focus();break;case"next":this.folds[++c].focus();break;case"last":this.folds[b-1].focus();break;case"first":default:this.folds[0].focus();}}},{key:"destroy",value:function(){this.emitEvent("destroy"),this.element.removeAttribute("id"),this.folds.forEach(function(a){a.destroy()}),this._unbindEvents(),this._cleanAria(),this.element.handorgel=null,this.emitEvent("destroyed")}},{key:"_handleFoldOpen",value:function(a){this.options.multiSelectable||this.folds.forEach(function(b){a!==b&&b.close()})}},{key:"_initAria",value:function(){this.options.ariaEnabled&&this.options.multiSelectable&&this.element.setAttribute("aria-multiselectable","true")}},{key:"_cleanAria",value:function(){this.element.removeAttribute("aria-multiselectable")}},{key:"_bindEvents",value:function(){this._listeners.foldOpen=this._handleFoldOpen.bind(this),this.on("fold:open",this._listeners.foldOpen)}},{key:"_unbindEvents",value:function(){this.off("fold:open",this._listeners.foldOpen)}}]),a}();return l(o.prototype,i.prototype),o.defaultOptions={keyboardInteraction:!0,multiSelectable:!0,ariaEnabled:!0,collapsible:!0,carouselFocus:!0,initialOpenAttribute:"data-open",initialOpenTransition:!0,initialOpenTransitionDelay:200,headerOpenClass:"handorgel__header--open",contentOpenClass:"handorgel__content--open",headerOpenedClass:"handorgel__header--opened",contentOpenedClass:"handorgel__content--opened",headerDisabledClass:"handorgel__header--disabled",contentDisabledClass:"handorgel__content--disabled",headerFocusClass:"handorgel__header--focus",contentFocusClass:"handorgel__content--focus"},o});
